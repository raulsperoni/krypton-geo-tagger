swagger: "2.0"
info:
  description: "Encuentra ubicaciones dado un texto [https://github.com/raulsperoni/krypton-geo-tagger](Github)"
  version: "1.0.0"
  title: "Krypton Geo Tagger"
  schemes:
    - "http"
paths:
  /api/sync/find:
    post:
      summary: Buscar ubicaciones a partir de texto Sync
      operationId: findSync
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - name: body
        in: body
        description: Texto a analizar
        schema:
          $ref: "#/definitions/DataIn"
        required: true
      responses:
        200:
          description: Objeto con lista de soluciones
          schema:
            $ref: "#/definitions/DataOut"

definitions:
  DataIn:
    type: object
    properties:
      text:
        type: string
        example: El lunes 27/08 arranca obra de reparación de pavimento de hormigón de Carlos María Ramírez. La obra será en varias etapas. La primera será entre Portugal y Río de Janeiro.Habrá desvío de buses que está terminando de ajustarse.

  DataOut:
    type: object
    properties:
      count:
        type: integer
        format: int32
        example: 6
      error:
        type: boolean
      id:
        type: string
        format: nullable
      solutions:
        type: array
        items:
          type: object
          properties:
            centroid:
              type: array
              items:
                type: array
                items:
                  type: number
                  example: -56.25565774437851
            elements:
              type: array
              items:
                type: object
                properties:
                  allows_intersection:
                    type: boolean
                  allows_lonely_solution:
                    type: boolean
                  codigo:
                    type: integer
                    format: int32
                    example: 5859
                  coll_type:
                    type: string
                    example: GeoCalle
                  geo_type:
                    type: string
                    example: LineString
                  geometry:
                    type: object
                    properties:
                      coordinates:
                        type: array
                        items:
                          type: array
                          items:
                            type: number
                            example: -56.25673657478452
                      type:
                        type: string
                        example: LineString
                  key:
                    type: string
                    example: 580010107b74d425892db13b
                  nombre:
                    type: string
                    example: AV CARLOS MARIA RAMIREZ
                  score_mongo:
                    type: number
                    example: 1.875
                  score_ngram:
                    type: integer
                    format: int32
                    example: 3
                  times_used_in_solution:
                    type: integer
                    format: int32
                    example: 1
                  token:
                    type: string
                    example: Carlos Maria Ramirez
                  token_end_char:
                    type: integer
                    format: int32
                    example: 90
                  token_start_char:
                    type: integer
                    format: int32
                    example: 70
                  vector:
                    type: number
                    example: 49.090088174321544
            score:
              type: object
              properties:
                combined:
                  type: integer
                  format: int32
                  example: 27
                count:
                  type: integer
                  format: int32
                  example: 2
                count_cross_type_solution:
                  type: integer
                  format: int32
                  example: 4
                count_same_type_solution:
                  type: integer
                  format: int32
                  example: 0
                count_tokens_lonely_solution:
                  type: integer
                  format: int32
                  example: 0
                mongo:
                  type: number
                  example: 3.375
                ngram:
                  type: integer
                  format: int32
                  example: 4
            show:
              type: string
              example: AV CARLOS MARIA RAMIREZ/RIO DE JANEIRO
